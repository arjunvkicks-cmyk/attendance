<!-- ONLY CHANGES MARKED WITH â­ COMMENT -->

<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Employee Attendance System</title>

<style>
/* SAME CSS â€” only one new style added for CompOff button */

#compOffBtn { background:#00897b; color:#fff; } /* â­ NEW */
</style>
</head>
<body>

<!-- SUCCESS POPUP SAME -->

<div class="card">

<!-- LOGIN SAME -->

<!-- ATTENDANCE -->
<div id="attendanceDiv" style="display:none;">
<h2>ğŸ¢ Attendance System</h2>
<h3 id="welcome"></h3>
<div id="infoBox"></div>
<div id="errorBox"></div>

<video id="video" autoplay playsinline muted></video>
<img id="photoPreview" alt="Captured Photo">

<button id="snapBtn" onclick="snapPhoto()">ğŸ“¸ Take Photo</button>
<button id="retakeBtn" onclick="retakePhoto()">ğŸ”„ Retake Photo</button>
<button id="clockInBtn" onclick="clockIn()">âœ… Clock In</button>
<button id="clockOutBtn" onclick="clockOut()">ğŸ”´ Clock Out</button>

<hr class="divider">

<button id="weekOffBtn" onclick="markWeekOff()">ğŸ“… Week Off</button>
<button id="leaveBtn" onclick="markLeave()">ğŸ–ï¸ Mark Leave</button>
<button id="compOffBtn" onclick="markCompOff()">ğŸ Comp Off</button> <!-- â­ NEW -->

<hr class="divider">

<button id="logoutBtn" onclick="logout()">Logout</button>
<div id="statusMsg"></div>
</div>
</div>

<script>

const SCRIPT_URL = "YOUR_WEBAPP_URL_HERE";

let currentUser="";
let currentName="";
let cameraStream=null;
let photoBase64="";

function setBtns(flag){
["loginBtn","clockInBtn","clockOutBtn","snapBtn","weekOffBtn","leaveBtn","compOffBtn"] /* â­ ADDED */
.forEach(id=>{
const el=document.getElementById(id);
if(el) el.disabled=flag;
});
}

/* ---------------- COMP OFF FUNCTION â­ NEW ---------------- */

function markCompOff(){
if(!confirm("Mark today as Comp Off for "+currentName+"?")) return;

setBtns(true);
setStatus("Marking Comp Offâ€¦");

callScript("compOff",{loginId:currentUser,name:currentName},function(res){

setBtns(false);

const msg=res.message||"";

if(msg.includes("Successful")){
setStatus("");
showPopup("ğŸ","Comp Off Marked!","Your comp off has been recorded for today.");
}else{
setStatus("âš ï¸ "+msg);
}

});
}

/* REST OF YOUR ORIGINAL JS SAME BELOW */

</script>
</body>
</html>
